<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <!-- /*
 * Copyright (c) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */ -->
  <ModulePrefs title="Starter App">
    <Require feature="rpc"/>
  </ModulePrefs>
  <Content type="html"><![CDATA[
<!DOCTYPE html>
<!-- The hangout API JavaScript. Always include this first -->
<script src="//hangoutsapi.talkgadget.google.com/hangouts/api/hangout.js?v=1.0"></script>
<!-- The JavaScript for this app. This must always be a full URL not a
     relative path.
     Tip: You can load it from a local web server such as
     http://localhost/app.js for faster single user development 
<script src="http://localhost/development/app.js"></script> -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Ultimate Market Making</title>
    <link rel="stylesheet" type="text/css" href="http://localhost/development/JavaScript-Playing-Cards/playingCards.ui.css">

<style type="text/css">
    body {
        margin-top: 1.0em;
        background-color: #fff;
        font-family: "Helvetica,Arial,FreeSans";
        color: #000000;
    }
    #container {
        margin: 0 auto;
        width: 860px;
        padding: 0px;
        background: #FFFFFF;
    }
    #content {
        width: 800px;
        padding-top: 100px;
        background: yellow;
    }
</style>
</head>
<body>
<script src="http://localhost/development/JavaScript-Playing-Cards/playingCards.js"></script>
<script src="http://localhost/development/JavaScript-Playing-Cards/playingCards.ui.js"></script>
<div id="container">
<h1 style="text-align: center;">Market</h1>
<div id="content">
Content

<input type="button" id="draw" value="draw a card">
<div id="yourHand"></div>
<h2 id="handRankSum"></h2> 
<script>
    var cardDeck = new playingCards();
    var hand = [];
    var showError = function(msg){
        $('#error').html(msg).show();
        setTimeout(function(){
            $('#error').fadeOut('slow');
        },3000);
    }
    var showHand = function(){
        var el = $('#yourHand')
        el.html('');
        for(var i=0;i<hand.length;i++){
            el.append(hand[i].getHTML());
        }
    }
  
    var doDrawCard = function(){
        var c = cardDeck.draw();
        if(!c){
            showError('no more cards');
            return;
        }
        hand[hand.length] = c;
        showHand();
        handRankSum = 0;
        for (var i = 0; i < hand.length; i++) {
            handRankSum += hand[i].numericRank();
        }
        console.log(handRankSum);
        $('#handRankSum').html(handRankSum);
    }

    $('#addCard').click(function(){
        if(!hand.length){
            showError('your hand is empty');
            return;
        }
        var c = hand.pop();
        showHand();
        cardDeck.addCard(c);
    });
    $('#draw').click(doDrawCard);
</script>
<div style="clear: both;"></div>
</div>
</div>
</body>
]]></Content>
</Module>
